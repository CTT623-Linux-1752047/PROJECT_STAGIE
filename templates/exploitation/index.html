{% extends "base/index.html" %}

{%block beforeScript%}
<script type="text/javascript">
    var viz;
    function draw() {
        var config = {
            container_id: "viz",
            server_url: "bolt://localhost:7687",
            server_user: "neo4j",
            server_password: "123",
            labels: {
                
            },
            relationships: {
                
            },
            initial_cypher: "MATCH (n) RETURN n "
        };
        
        viz = new NeoVis.default(config);
        console.log(viz)
        viz.render();
    }
</script>
{% endblock %}

{% block content %}
<div class="col-lg-12">
    <div class="card">
        <div class="card-body">
            <div id="accordion-five" class="accordion accordion-left-indicator" style="background-color: white">
                <div class="accordion__item">
                    <div class="accordion__header collapsed" data-toggle="collapse" data-target="#left-indicator_collapseTwo">
                        <span class="accordion__header--text">Recherche Information</span>
                        <span class="accordion__header--indicator"></span>
                    </div>
                    <div id="left-indicator_collapseTwo" class="collapse accordion__body" data-parent="#accordion-five">
                        <div class="accordion__body--text">
                            <h4 class="card-title">Les données d'entrée</h4>
                            <div class="row">
                                <select class="form-control col-lg-3" id="searchCondition1" style="margin:2px 7px 2px 7px">
                                    <option id="Con1Blank" value=""></option>
                                    <option id="Con1Technique" value="Con1Technique">Une technique</option>
                                    <option id="Con1TypeTache" value="Con1TypeTache">Un type de tâches</option> 
                                    <option id="Con1Etudiant" value="Con1Etudiant">Un étudiant</option>
                                </select>
                                <select class="form-control col-lg-3" id="searchCondition2" style="margin:2px 7px 2px 7px">
                                    <option id="Con2Blank" value=""></option>
                                    <option id="Con2NiveauAcquisition" value="Con2NiveauAcquisition">un niveau d'acquisition</option>
                                    <option id="Con2Etudiant" value="Con2Etudiant">un étudiant</option>
                                    <option id="Con2Technique" value="Con2Technique">Une technique</option>
                                </select>
                                <select class="form-control col-lg-3" id="searchCondition3" style="margin:2px 7px 2px 7px">
                                    <option id="Con3Blank" value=""></option>
                                    <option id="Con3Group" value="Con3Group">un groupe/classe</option>
                                </select>
                            </div>
                            <h4 class="card-title" style="margin-top: 10px">Les données de sortie</h4>
                            <div class="row">
                                <select class="form-control col-lg-5" id="searchResult1"  style="margin:2px 7px 2px 7px">
                                    <option id="Res1Blank" value=""></option>
                                    <option id="TechAss" value="TechAss">Les techniques associées</option>
                                    <option id="SousTypeTach" value="SousTypeTach">Les sous types de tâches</option> 
                                    <option id="ParentTypeTach" value="ParentTypeTach">Le type de tâche parent</option>
                                    <option id="VVariable" value="VVariable">Les valeurs de variables</option>
                                    <option id="AttacheTypeTach" value="AttacheTypeTach">Le type de tâche attaché</option> 
                                    <option id="TechGlobal" value="TechGlobal">Les techniques en concurrence globale</option>
                                    <option id="TechExt" value="TechExt">Les techniques en concurrence par extension</option>
                                    <option id="TechPart" value="TechPart">Les techniques en concurrence partiel</option> 
                                    <option id="EtudiantNiveau" value="EtudiantNiveau">Les étudiants du group atteignent ce niveau</option>
                                    <option id="NiveauAcqui" value="NiveauAcqui">Niveau d'acquisition</option> 
                                </select>
                                <select class="form-control col-lg-5" id="searchResult2"  style="margin:2px 7px 2px 7px">
                                    <option id="Res2Blank" value=""></option>
                                    <option id="TechSousTypeTach" value="TechSousTypeTach">Les techniques attachées à chaque sous type de tâches</option>
                                    <option id="TechParentTypeTach" value="TechParentTypeTach">Les techniques attachées à ce type de tâche parent</option>
                                    <option id="ChacuneNiveauAcqui" value="ChacuneNiveauAcqui">Chacune attachée avec le niveau d'acquisition</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-secondary" style="float:right ; margin-top:5px">
                                <i class="ti-search"></i>
                                &nbsp;Recherche
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-lg-12">
    <div class="card">
        <div class="card-header">
            <select class="form-control col-lg-2" id="typeDisplay">
                <option>le graph données</option>
                <option>Le tableau</option>
            </select>
        </div>
        <div class="card-body">
            <div id="viz"></div>
        </div>
        {% comment %} <div class="card-footer">
            Card footer
        </div> {% endcomment %}
    </div>
</div>
{% endblock %}

{% block afterScript %}
<script type="text/javascript">
    function resetAreaCondition(){
        $('#searchCondition1').show()
        $('#searchCondition1').val("")
        $('#Con1Technique').show()
        $('#Con1TypeTache').show()
        $('#Con1Etudiant').show()

        $('#searchCondition2').show()
        $('#searchCondition2').val("")
        $('#Con2NiveauAcquisition').show()
        $('#Con2Etudiant').show()
        $('#Con2Technique').show()

        $('#searchCondition3').show()
        $('#searchCondition3').val("")
        $('#Con3Group').show()

        $('#searchResult2').show()
        $('#searchResult2').val("")

        $('#TechAss').show()
        $('#SousTypeTach').show()
        $('#ParentTypeTach').show()
        $('#VVariable').show()
        $('#AttacheTypeTach').show()
        $('#TechGlobal').show()
        $('#TechExt').show()
        $('#TechPart').show()
        $('#EtudiantNiveau').show()
        $('#NiveauAcqui').show()

        $('#ChacuneNiveauAcqui').show()
        $('#TechSousTypeTach').show()
        $('#TechParentTypeTach').show()
    }

    $(document).ready(function() {
        $('#searchCondition1').on('change', function(){
            strCon1 = $('#searchCondition1').val()
            strCon2 = $('#searchCondition2').val()
            strCon3 = $('#searchCondition3').val()
            strRes1 = $('#searchResult1').val()
            strRes2 = $('#searchResult2').val()

            switch(strCon1) {
                case "Con1Technique":
                    resetAreaCondition()
                    $('#searchCondition1').val(strCon1)
                    $('#searchCondition2').val(strCon2)
                    $('#searchCondition3').val(strCon3)
                    $('#Con2Technique').hide()

                    $('#searchResult2').hide()
                    $('#searchResult2').val("")
                    $('#searchResult1').val(strRes1)

                    $('#TechAss').hide()
                    $('#SousTypeTach').hide()
                    $('#ParentTypeTach').hide()
                    $('#VVariable').hide()
                    
                    break;
                case "Con1TypeTache":
                    resetAreaCondition()
                    $('#searchCondition1').val(strCon1)
                    $('#searchCondition2').val(strCon2)
                    $('#searchCondition3').val(strCon3)
                    $('#searchCondition2').hide()
                    $('#searchCondition2').val("")
                    $('#searchCondition3').hide()
                    $('#searchCondition3').val("")

                    $('#AttacheTypeTach').hide()
                    $('#TechGlobal').hide()
                    $('#TechExt').hide()
                    $('#TechPart').hide()
                    $('#EtudiantNiveau').hide()
                    $('#NiveauAcqui').hide()

                    $('#ChacuneNiveauAcqui').hide()
                    $('#searchResult1').val(strRes1)
                    $('#searchResult2').val(strRes2)

                    break;
                case "Con1Etudiant":
                    resetAreaCondition()
                    $('#searchCondition1').val(strCon1)
                    $('#searchCondition2').val(strCon2)
                    $('#searchCondition3').val(strCon3)
                    $('#searchCondition3').hide()
                    $('#searchCondition3').val("")
                    $('#Con2Etudiant').hide()

                    $('#searchResult1').val(strRes1)
                    $('#searchResult2').val(strRes2)
                    $('#SousTypeTach').hide()
                    $('#ParentTypeTach').hide()
                    $('#VVariable').hide()
                    $('#AttacheTypeTach').hide()
                    $('#TechGlobal').hide()
                    $('#TechExt').hide()
                    $('#TechPart').hide()
                    $('#EtudiantNiveau').hide()

                    $('#TechSousTypeTach').hide()
                    $('#TechParentTypeTach').hide()
                    break;
                default:
                  resetAreaCondition()
              }
        })

        $('#searchCondition2').on('change', function(){
            strCon1 = $('#searchCondition1').val()
            strCon2 = $('#searchCondition2').val()
            strCon3 = $('#searchCondition3').val()
            switch(strCon2) {
                case "Con2NiveauAcquisition":
                    resetAreaCondition()
                    if ( strCon1 == "Con1Etudiant" ) {
                        $('#Con1TypeTache').hide()
                        $('#searchCondition3').val("")
                        $('#searchCondition3').hide()
                        $('#searchCondition2').val(strCon2)

                        $('#SousTypeTach').hide()
                        $('#ParentTypeTach').hide()
                        $('#VVariable').hide()
                        $('#AttacheTypeTach').hide()
                        $('#TechGlobal').hide()
                        $('#TechExt').hide()
                        $('#TechPart').hide()
                        $('#NiveauAcqui').hide()
                
                        $('#searchResult2').hide()
                        $('#searchResult2').val("")
                        $('#searchResult1').val(strRes1)

                    } else if ( strCon1 == "Con1Technique" ){
                        $('#Con1TypeTache').hide()
                        $('#searchCondition3').val("Con3Group")
                        $('#searchCondition2').val(strCon2)
                        $('#searchCondition1').val(strCon1)

                        $('#TechAss').hide()
                        $('#SousTypeTach').hide()
                        $('#ParentTypeTach').hide()
                        $('#VVariable').hide()
                        $('#AttacheTypeTach').hide()
                        $('#TechGlobal').hide()
                        $('#TechExt').hide()
                        $('#TechPart').hide()
                        $('#NiveauAcqui').hide()

                        $('#searchResult2').hide()
                        $('#searchResult2').val("")
                        $('#searchResult1').val(strRes1)

                    } else {
                        $('#Con1TypeTache').hide()
                        $('#searchCondition1').val(strCon1)
                        $('#searchCondition2').val(strCon2)
                        $('#searchCondition3').val(strCon3)

                        $('#SousTypeTach').hide()
                        $('#ParentTypeTach').hide()
                        $('#VVariable').hide()
                        $('#AttacheTypeTach').hide()
                        $('#TechGlobal').hide()
                        $('#TechExt').hide()
                        $('#TechPart').hide()
                        $('#EtudiantNiveau').hide()
                        $('#NiveauAcqui').hide()

                        $('#searchResult2').hide()
                        $('#searchResult2').val("")
                        $('#searchResult1').val(strRes1)
                    }
                    break;
                case "Con2Etudiant":
                    resetAreaCondition()
                    $('#Con1TypeTache').hide()
                    $('#Con2Etudiant').hide()
                    $('#searchCondition1').val("Con1Technique")
                    $('#searchCondition2').val(strCon2)
                    $('#searchCondition3').val("")
                    $('#searchCondition3').hide()

                    $('#TechAss').hide()
                    $('#SousTypeTach').hide()
                    $('#ParentTypeTach').hide()
                    $('#VVariable').hide()
                    $('#AttacheTypeTach').hide()
                    $('#TechGlobal').hide()
                    $('#TechExt').hide()
                    $('#TechPart').hide()
                    $('#EtudiantNiveau').hide()

                    $('#searchResult2').hide()
                    $('#searchResult2').val("")
                    $('#searchResult1').val(strRes1)

                    break;
                case "Con2Technique":
                    resetAreaCondition()
                    $('#Con1TypeTache').hide()
                    $('#Con1Technique').show()
                    $('#searchCondition1').val("Con1Etudiant")
                    $('#searchCondition2').val(strCon2)
                    $('#searchCondition3').val("")
                    $('#searchCondition3').hide()

                    $('#Con1Technique').hide()

                    $('#TechAss').hide()
                    $('#SousTypeTach').hide()
                    $('#ParentTypeTach').hide()
                    $('#VVariable').hide()
                    $('#AttacheTypeTach').hide()
                    $('#TechGlobal').hide()
                    $('#TechExt').hide()
                    $('#TechPart').hide()
                    $('#EtudiantNiveau').hide()

                    $('#searchResult2').hide()
                    $('#searchResult2').val("")
                    $('#searchResult1').val(strRes1)

                    break;
                default:
                  resetAreaCondition()

            }
        })

    });
</script>
{% endblock %}

